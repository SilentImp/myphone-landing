var LandgingController,
  __bind = function(fn, me) {
    return function() {
      return fn.apply(me, arguments);
    };
  };

LandgingController = (function() {
  function LandgingController() {
    this.trysubmit = __bind(this.trysubmit, this);
    this.formSend = __bind(this.formSend, this);
    this.submit = __bind(this.submit, this);
    this.selectLanguage = __bind(this.selectLanguage, this);
    this.timerUpdate = __bind(this.timerUpdate, this);
    this.codeChange = __bind(this.codeChange, this);
    this.closeRules = __bind(this.closeRules, this);
    this.showRules = __bind(this.showRules, this);
    this.itype = 'click';
    this.html = $('html');
    if (this.html.hasClass('touch')) {
      this.itype = 'touchstart';
    }
    this.form = $('.register-form');
    this.timer = $('.time');
    this.ti = 0;
    window.setInterval(this.timerUpdate, 1000);
    this.timerUpdate();
    $('.code-widget').find('input').on('change', this.codeChange);
    $.mask.definitions['c'] = "[А-Яа-я]";
    this.form.find('input.tel').mask("(999) 999-99-99");
    this.form.find('input.code').mask("+9?999");
    $('.rules .close').on(this.itype, this.closeRules);
    $('.show-rules').on(this.itype, this.showRules);
    this.message = this.form.prev();
    this.lang = $('nav.language');
    this.lang.on(this.itype, this.selectLanguage);
    this.lang.find('a').on(this.itype, this.selectLanguage);
    this.form.find('button').on(this.itype, this.trysubmit);
    this.form.on('submit', this.submit);
  }

  LandgingController.prototype.showRules = function(event) {
    event.preventDefault();
    this.html.addClass('rules');
    return $(event.currentTarget).closest('.page').find('.rules').show();
  };

  LandgingController.prototype.closeRules = function(event) {
    this.html.removeClass('rules');
    return $(event.currentTarget.parentNode).hide();
  };

  LandgingController.prototype.codeChange = function(event) {
    var current, element, wrapper;
    element = $(event.currentTarget);
    wrapper = element.closest('.code-widget');
    current = wrapper.find('.current');
    current.text(element.val());
    wrapper.addClass('changed');
    return window.setTimeout(function() {
      return wrapper.removeClass('changed');
    }, 500);
  };

  LandgingController.prototype.timerUpdate = function() {
    var sepator;
    if ((this.ti % 2) === 0) {
      sepator = ":";
    } else {
      sepator = " ";
    }
    this.ti++;
    return this.timer.text(moment().format("HH" + sepator + "mm"));
  };

  LandgingController.prototype.selectLanguage = function(event) {
    event.preventDefault();
    event.stopPropagation();
    this.lang.find('a').toggleClass('selected');
    return this.html.attr('lang', this.lang.find('.selected').attr('data-lang'));
  };

  LandgingController.prototype.submit = function(event) {
    var form;
    event.preventDefault();
    form = $(event.currentTarget);
    return $.post(form.attr('action'), form.serialize()).complete(this.formSend);
  };

  LandgingController.prototype.formSend = function(responce) {
    this.form.hide();
    return this.message.show();
  };

  LandgingController.prototype.trysubmit = function(event) {
    var button, form;
    button = $(event.currentTarget);
    form = button.closest('form.register-form');
    return form.addClass('validation-start');
  };

  return LandgingController;

})();

$(document).ready(function() {
  return new LandgingController();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxhbmRnaW5nQ29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxrQkFBQTtFQUFBLGtGQUFBOztBQUFBO0FBQ2UsRUFBQSw0QkFBQSxHQUFBO0FBRVgsaURBQUEsQ0FBQTtBQUFBLCtDQUFBLENBQUE7QUFBQSwyQ0FBQSxDQUFBO0FBQUEsMkRBQUEsQ0FBQTtBQUFBLHFEQUFBLENBQUE7QUFBQSxtREFBQSxDQUFBO0FBQUEsbURBQUEsQ0FBQTtBQUFBLGlEQUFBLENBQUE7QUFBQSxJQUFBLElBQUMsQ0FBQSxLQUFELEdBQVMsT0FBVCxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsSUFBRCxHQUFRLENBQUEsQ0FBRSxNQUFGLENBRFIsQ0FBQTtBQUVBLElBQUEsSUFBRyxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sQ0FBZSxPQUFmLENBQUg7QUFDRSxNQUFBLElBQUMsQ0FBQSxLQUFELEdBQVMsWUFBVCxDQURGO0tBRkE7QUFBQSxJQUtBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FBQSxDQUFFLGdCQUFGLENBTFIsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFBLENBQUUsT0FBRixDQVBULENBQUE7QUFBQSxJQVFBLElBQUMsQ0FBQSxFQUFELEdBQU0sQ0FSTixDQUFBO0FBQUEsSUFTQSxNQUFNLENBQUMsV0FBUCxDQUFtQixJQUFDLENBQUEsV0FBcEIsRUFBaUMsSUFBakMsQ0FUQSxDQUFBO0FBQUEsSUFVQSxJQUFDLENBQUEsV0FBRCxDQUFBLENBVkEsQ0FBQTtBQUFBLElBWUEsQ0FBQSxDQUFFLGNBQUYsQ0FBaUIsQ0FBQyxJQUFsQixDQUF1QixPQUF2QixDQUErQixDQUFDLEVBQWhDLENBQW1DLFFBQW5DLEVBQTZDLElBQUMsQ0FBQSxVQUE5QyxDQVpBLENBQUE7QUFBQSxJQWVBLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBWSxDQUFBLEdBQUEsQ0FBbkIsR0FBMEIsVUFmMUIsQ0FBQTtBQUFB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Q0FBQSxDQUE1QixDQUE2QyxDQUFDLFFBQTlDLENBQXVELElBQUMsQ0FBQSxRQUF4RCxFQUhNO0VBQUEsQ0F0RVIsQ0FBQTs7QUFBQSwrQkEyRUEsUUFBQSxHQUFVLFNBQUMsUUFBRCxHQUFBO0FBQ1IsSUFBQSxJQUFDLENBQUEsSUFBSSxDQUFDLElBQU4sQ0FBQSxDQUFBLENBQUE7V0FDQSxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBQSxFQUZRO0VBQUEsQ0EzRVYsQ0FBQTs7QUFBQSwrQkErRUEsU0FBQSxHQUFXLFNBQUMsS0FBRCxHQUFBO0FBQ1QsUUFBQSxZQUFBO0FBQUEsSUFBQSxNQUFBLEdBQVMsQ0FBQSxDQUFFLEtBQUssQ0FBQyxhQUFSLENBQVQsQ0FBQTtBQUFBLElBQ0EsSUFBQSxHQUFPLE1BQU0sQ0FBQyxPQUFQLENBQWUsb0JBQWYsQ0FEUCxDQUFBO1dBRUEsSUFBSSxDQUFDLFFBQUwsQ0FBYyxrQkFBZCxFQUhTO0VBQUEsQ0EvRVgsQ0FBQTs7NEJBQUE7O0lBREYsQ0FBQTs7QUFBQSxDQXNGQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEtBQVosQ0FBa0IsU0FBQSxHQUFBO1NBQ1osSUFBQSxrQkFBQSxDQUFBLEVBRFk7QUFBQSxDQUFsQixDQXRGQSxDQUFBIiwiZmlsZSI6IkxhbmRnaW5nQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIExhbmRnaW5nQ29udHJvbGxlclxuICBjb25zdHJ1Y3RvcjogLT5cblxuICAgIEBpdHlwZSA9ICdjbGljayc7XG4gICAgQGh0bWwgPSAkICdodG1sJ1xuICAgIGlmIEBodG1sLmhhc0NsYXNzKCd0b3VjaCcpXG4gICAgICBAaXR5cGUgPSAndG91Y2hzdGFydCdcblxuICAgIEBmb3JtID0gJCgnLnJlZ2lzdGVyLWZvcm0nKVxuICAgIFxuICAgIEB0aW1lciA9ICQoJy50aW1lJylcbiAgICBAdGkgPSAwXG4gICAgd2luZG93LnNldEludGVydmFsIEB0aW1lclVwZGF0ZSwgMTAwMFxuICAgIEB0aW1lclVwZGF0ZSgpXG5cbiAgICAkKCcuY29kZS13aWRnZXQnKS5maW5kKCdpbnB1dCcpLm9uICdjaGFuZ2UnLCBAY29kZUNoYW5nZVxuXG5cbiAgICAkLm1hc2suZGVmaW5pdGlvbnNbJ2MnXSA9IFwiW9CQLdCv0LAt0Y9dXCJcbiAgICBAZm9ybS5maW5kKCdpbnB1dC50ZWwnKS5tYXNrIFwiKDk5OSkgOTk5LTk5LTk5XCJcbiAgICAjIEBmb3JtLmZpbmQoJ2lucHV0LmN5cicpLm1hc2sgXCJjYz9jY2NjY2NjY2NjY2NjY2NjY2NjY1wiXG4gICAgQGZvcm0uZmluZCgnaW5wdXQuY29kZScpLm1hc2sgXCIrOT85OTlcIlxuXG4gICAgJCgnLnJ1bGVzIC5jbG9zZScpLm9uIEBpdHlwZSwgQGNsb3NlUnVsZXNcbiAgICAkKCcuc2hvdy1ydWxlcycpLm9uIEBpdHlwZSwgQHNob3dSdWxlc1xuICAgIFxuICAgIFxuICAgIEBtZXNzYWdlID0gdGhpcy5mb3JtLnByZXYoKVxuXG4gICAgQGxhbmcgPSAkICduYXYubGFuZ3VhZ2UnXG4gICAgQGxhbmcub24gdGhpcy5pdHlwZSwgQHNlbGVjdExhbmd1YWdlXG4gICAgQGxhbmcuZmluZCgnYScpLm9uIHRoaXMuaXR5cGUsIEBzZWxlY3RMYW5ndWFnZVxuXG4gICAgQGZvcm0uZmluZCgnYnV0dG9uJykub24gdGhpcy5pdHlwZSwgQHRyeXN1Ym1pdFxuICAgIEBmb3JtLm9uICdzdWJtaXQnLCBAc3VibWl0XG5cbiAgc2hvd1J1bGVzOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGh0bWwuYWRkQ2xhc3MgJ3J1bGVzJ1xuICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLnBhZ2UnKS5maW5kKCcucnVsZXMnKS5zaG93KClcblxuICBjbG9zZVJ1bGVzOiAoZXZlbnQpPT5cbiAgICBAaHRtbC5yZW1vdmVDbGFzcyAncnVsZXMnXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUpLmhpZGUoKVxuICAgIFxuXG4gIGNvZGVDaGFuZ2U6IChldmVudCk9PlxuICAgIGVsZW1lbnQgPSAkIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB3cmFwcGVyID0gZWxlbWVudC5jbG9zZXN0KCcuY29kZS13aWRnZXQnKVxuICAgIGN1cnJlbnQgPSB3cmFwcGVyLmZpbmQoJy5jdXJyZW50JylcbiAgICBjdXJyZW50LnRleHQoZWxlbWVudC52YWwoKSlcbiAgICB3cmFwcGVyLmFkZENsYXNzICdjaGFuZ2VkJ1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpLT5cbiAgICAgIHdyYXBwZXIucmVtb3ZlQ2xhc3MgJ2NoYW5nZWQnXG4gICAgLCA1MDApXG5cblxuICB0aW1lclVwZGF0ZTogPT5cbiAgICBpZiAoQHRpJTIpPT0wXG4gICAgICBzZXBhdG9yID0gXCI6XCJcbiAgICBlbHNlXG4gICAgICBzZXBhdG9yID0gXCLCoFwiXG4gICAgQHRpKytcbiAgICBAdGltZXIudGV4dChtb21lbnQoKS5mb3JtYXQoXCJISFwiK3NlcGF0b3IrXCJtbVwiKSlcblxuICBzZWxlY3RMYW5ndWFnZTogKGV2ZW50KT0+XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgQGxhbmcuZmluZCgnYScpLnRvZ2dsZUNsYXNzICdzZWxlY3RlZCdcbiAgICBAaHRtbC5hdHRyICdsYW5nJywgQGxhbmcuZmluZCgnLnNlbGVjdGVkJykuYXR0cignZGF0YS1sYW5nJylcblxuICBzdWJtaXQ6IChldmVudCk9PlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBmb3JtID0gJCBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgJC5wb3N0KGZvcm0uYXR0cignYWN0aW9uJyksIGZvcm0uc2VyaWFsaXplKCkpLmNvbXBsZXRlKEBmb3JtU2VuZClcblxuICBmb3JtU2VuZDogKHJlc3BvbmNlKT0+XG4gICAgQGZvcm0uaGlkZSgpXG4gICAgQG1lc3NhZ2Uuc2hvdygpXG5cbiAgdHJ5c3VibWl0OiAoZXZlbnQpPT5cbiAgICBidXR0b24gPSAkIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoJ2Zvcm0ucmVnaXN0ZXItZm9ybScpXG4gICAgZm9ybS5hZGRDbGFzcygndmFsaWRhdGlvbi1zdGFydCcpXG5cblxuJChkb2N1bWVudCkucmVhZHkgKCktPlxuICBuZXcgTGFuZGdpbmdDb250cm9sbGVyKCkiXX0=