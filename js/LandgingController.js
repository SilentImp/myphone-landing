var LandgingController,
  __bind = function(fn, me) {
    return function() {
      return fn.apply(me, arguments);
    };
  };

LandgingController = (function() {
  function LandgingController() {
    this.trysubmit = __bind(this.trysubmit, this);
    this.formSend = __bind(this.formSend, this);
    this.submit = __bind(this.submit, this);
    this.selectLanguage = __bind(this.selectLanguage, this);
    this.timerUpdate = __bind(this.timerUpdate, this);
    this.codeChange = __bind(this.codeChange, this);
    this.codeSelectChange = __bind(this.codeSelectChange, this);
    this.closeRules = __bind(this.closeRules, this);
    this.showRules = __bind(this.showRules, this);
    this.ip2Country = __bind(this.ip2Country, this);
    this.itype = 'click';
    this.html = $('html');
    if (this.html.hasClass('touch')) {
      this.itype = 'touchstart';
    }
    this.form = $('.register-form');
    this.timer = $('.time');
    this.ti = 0;
    window.setInterval(this.timerUpdate, 1000);
    this.timerUpdate();
    this.form.find('.code-widget input').on('change', this.codeChange);
    this.form.find('select').on('change', this.codeSelectChange);
    this.form.find('input.tel').mask("(999) 999-99-99");
    this.form.find('input.code').mask("+9?999");
    $('.rules .close').on(this.itype, this.closeRules);
    $('.show-rules').on(this.itype, this.showRules);
    this.message = this.form.prev();
    this.lang = $('nav.language');
    this.lang.on(this.itype, this.selectLanguage);
    this.lang.find('a').on(this.itype, this.selectLanguage);
    this.form.find('button').on(this.itype, this.trysubmit);
    this.form.on('submit', this.submit);
    $.ajax({
      url: "http://www.telize.com/geoip",
      jsonp: "document.landing.ip2Country",
      dataType: "jsonp"
    });
  }

  LandgingController.prototype.ip2Country = function(obj) {
    console.log(obj);
    switch (obj.country_code) {
      case 'AZ':
        return console.log('AZ');
      default:
        return console.log('RU');
    }
  };

  LandgingController.prototype.showRules = function(event) {
    event.preventDefault();
    this.html.addClass('rules');
    $(event.currentTarget).closest('.page').find('.rules').show();
    return window.scrollTo(0, 0);
  };

  LandgingController.prototype.closeRules = function(event) {
    this.html.removeClass('rules');
    $(event.currentTarget.parentNode).hide();
    return window.scrollTo(0, 0);
  };

  LandgingController.prototype.codeSelectChange = function(event) {
    var current, element, value, wrapper;
    element = $(event.currentTarget);
    value = element.val();
    wrapper = element.closest('.code-widget');
    current = wrapper.find('.current .value');
    current.text(value);
    return wrapper.find('input[type="radio"][name="code"][value="' + value + '"]').trigger('click');
  };

  LandgingController.prototype.codeChange = function(event) {
    var current, element, wrapper;
    element = $(event.currentTarget);
    wrapper = element.closest('.code-widget');
    current = wrapper.find('.current .value');
    current.text(element.val());
    wrapper.addClass('changed');
    return window.setTimeout(function() {
      return wrapper.removeClass('changed');
    }, 500);
  };

  LandgingController.prototype.timerUpdate = function() {
    var sepator;
    if ((this.ti % 2) === 0) {
      sepator = ":";
    } else {
      sepator = "Â ";
    }
    this.ti++;
    return this.timer.text(moment().format("HH" + sepator + "mm"));
  };

  LandgingController.prototype.selectLanguage = function(event) {
    event.preventDefault();
    event.stopPropagation();
    this.lang.find('a').toggleClass('selected');
    return this.html.attr('lang', this.lang.find('.selected').attr('data-lang'));
  };

  LandgingController.prototype.submit = function(event) {
    var form;
    event.preventDefault();
    form = $(event.currentTarget);
    console.log(form.serialize());
    return $.post(form.attr('action'), form.serialize()).complete(this.formSend);
  };

  LandgingController.prototype.formSend = function(responce) {
    this.form.hide();
    return this.message.show();
  };

  LandgingController.prototype.trysubmit = function(event) {
    var button, form;
    button = $(event.currentTarget);
    form = button.closest('form.register-form');
    return form.addClass('validation-start');
  };

  return LandgingController;

})();

$(document).ready(function() {
  return document.landing = new LandgingController();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxhbmRnaW5nQ29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxrQkFBQTtFQUFBLGtGQUFBOztBQUFBO0FBQ2UsRUFBQSw0QkFBQSxHQUFBO0FBRVgsaURBQUEsQ0FBQTtBQUFBLCtDQUFBLENBQUE7QUFBQSwyQ0FBQSxDQUFBO0FBQUEsMkRBQUEsQ0FBQTtBQUFBLHFEQUFBLENBQUE7QUFBQSxtREFBQSxDQUFBO0FBQUEsK0RBQUEsQ0FBQTtBQUFBLG1EQUFBLENBQUE7QUFBQSxpREFBQSxDQUFBO0FBQUEsbURBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxPQUFULENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FBQSxDQUFFLE1BQUYsQ0FEUixDQUFBO0FBRUEsSUFBQSxJQUFHLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBTixDQUFlLE9BQWYsQ0FBSDtBQUNFLE1BQUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxZQUFULENBREY7S0FGQTtBQUFBLElBS0EsSUFBQyxDQUFBLElBQUQsR0FBUSxDQUFBLENBQUUsZ0JBQUYsQ0FMUixDQUFBO0FBQUEsSUFPQSxJQUFDLENBQUEsS0FBRCxHQUFTLENBQUEsQ0FBRSxPQUFGLENBUFQsQ0FBQTtBQUFBLElBUUEsSUFBQyxDQUFBLEVBQUQsR0FBTSxDQVJOLENBQUE7QUFBQSxJQVNBLE1BQU0sQ0FBQyxXQUFQLENBQW1CLElBQUMsQ0FBQSxXQUFwQixFQUFpQyxJQUFqQyxDQVRBLENBQUE7QUFBQSxJQVVBLElBQUMsQ0FBQSxXQUFELENBQUEsQ0FWQSxDQUFBO0FBQUEsSUFZQSxJQUFDLENBQUEsSUFBSSxDQUFDLElBQU4sQ0FBVyxvQkFBWCxDQUFnQyxDQUFDLEVBQWpDLENBQW9DLFFBQXBDLEVBQThDLElBQUMsQ0FBQSxVQUEvQyxDQVpBLENBQUE7QUFBQSxJQWFBLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixDQUFXLFFBQVgsQ0FB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LEdBQVIsQ0FBWSxJQUFJLENBQUMsU0FBTCxDQUFBLENBQVosQ0FGQSxDQUFBO1dBR0EsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFJLENBQUMsSUFBTCxDQUFVLFFBQVYsQ0FBUCxFQUE0QixJQUFJLENBQUMsU0FBTCxDQUFBLENBQTVCLENBQTZDLENBQUMsUUFBOUMsQ0FBdUQsSUFBQyxDQUFBLFFBQXhELEVBSk07RUFBQSxDQS9GUixDQUFBOztBQUFBLCtCQXFHQSxRQUFBLEdBQVUsU0FBQyxRQUFELEdBQUE7QUFDUixJQUFBLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixDQUFBLENBQUEsQ0FBQTtXQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFBLEVBRlE7RUFBQSxDQXJHVixDQUFBOztBQUFBLCtCQXlHQSxTQUFBLEdBQVcsU0FBQyxLQUFELEdBQUE7QUFDVCxRQUFBLFlBQUE7QUFBQSxJQUFBLE1BQUEsR0FBUyxDQUFBLENBQUUsS0FBSyxDQUFDLGFBQVIsQ0FBVCxDQUFBO0FBQUEsSUFDQSxJQUFBLEdBQU8sTUFBTSxDQUFDLE9BQVAsQ0FBZSxvQkFBZixDQURQLENBQUE7V0FFQSxJQUFJLENBQUMsUUFBTCxDQUFjLGtCQUFkLEVBSFM7RUFBQSxDQXpHWCxDQUFBOzs0QkFBQTs7SUFERixDQUFBOztBQUFBLENBZ0hBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixTQUFBLEdBQUE7U0FDaEIsUUFBUSxDQUFDLE9BQVQsR0FBdUIsSUFBQSxrQkFBQSxDQUFBLEVBRFA7QUFBQSxDQUFsQixDQWhIQSxDQUFBIiwiZmlsZSI6IkxhbmRnaW5nQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIExhbmRnaW5nQ29udHJvbGxlclxuICBjb25zdHJ1Y3RvcjogLT5cblxuICAgIEBpdHlwZSA9ICdjbGljayc7XG4gICAgQGh0bWwgPSAkICdodG1sJ1xuICAgIGlmIEBodG1sLmhhc0NsYXNzKCd0b3VjaCcpXG4gICAgICBAaXR5cGUgPSAndG91Y2hzdGFydCdcblxuICAgIEBmb3JtID0gJCgnLnJlZ2lzdGVyLWZvcm0nKVxuICAgIFxuICAgIEB0aW1lciA9ICQoJy50aW1lJylcbiAgICBAdGkgPSAwXG4gICAgd2luZG93LnNldEludGVydmFsIEB0aW1lclVwZGF0ZSwgMTAwMFxuICAgIEB0aW1lclVwZGF0ZSgpXG5cbiAgICBAZm9ybS5maW5kKCcuY29kZS13aWRnZXQgaW5wdXQnKS5vbiAnY2hhbmdlJywgQGNvZGVDaGFuZ2VcbiAgICBAZm9ybS5maW5kKCdzZWxlY3QnKS5vbiAnY2hhbmdlJywgQGNvZGVTZWxlY3RDaGFuZ2VcblxuICAgICMgJC5tYXNrLmRlZmluaXRpb25zWydjJ10gPSBcIlteXFxkXFxzLiw6IUBeJSYqXys9wrHCpyMkXigpXFxcIlxcJ11cIlxuICAgICMgQGZvcm0uZmluZCgnaW5wdXQud29yZCcpLm1hc2sgXCJjYz9jY2NjY2NjY2NjY2NjY2NjY2NjY1wiXG5cbiAgICBAZm9ybS5maW5kKCdpbnB1dC50ZWwnKS5tYXNrIFwiKDk5OSkgOTk5LTk5LTk5XCJcbiAgICBAZm9ybS5maW5kKCdpbnB1dC5jb2RlJykubWFzayBcIis5Pzk5OVwiXG5cbiAgICAkKCcucnVsZXMgLmNsb3NlJykub24gQGl0eXBlLCBAY2xvc2VSdWxlc1xuICAgICQoJy5zaG93LXJ1bGVzJykub24gQGl0eXBlLCBAc2hvd1J1bGVzXG4gICAgXG4gICAgXG4gICAgQG1lc3NhZ2UgPSB0aGlzLmZvcm0ucHJldigpXG5cbiAgICBAbGFuZyA9ICQgJ25hdi5sYW5ndWFnZSdcbiAgICBAbGFuZy5vbiB0aGlzLml0eXBlLCBAc2VsZWN0TGFuZ3VhZ2VcbiAgICBAbGFuZy5maW5kKCdhJykub24gdGhpcy5pdHlwZSwgQHNlbGVjdExhbmd1YWdlXG5cbiAgICBAZm9ybS5maW5kKCdidXR0b24nKS5vbiB0aGlzLml0eXBlLCBAdHJ5c3VibWl0XG4gICAgQGZvcm0ub24gJ3N1Ym1pdCcsIEBzdWJtaXRcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6IFwiaHR0cDovL3d3dy50ZWxpemUuY29tL2dlb2lwXCIsXG4gICAgICBqc29ucDogXCJkb2N1bWVudC5sYW5kaW5nLmlwMkNvdW50cnlcIixcbiAgICAgIGRhdGFUeXBlOiBcImpzb25wXCJcbiAgICAgIH0pXG5cbiAgaXAyQ291bnRyeTogKG9iaik9PlxuICAgIGNvbnNvbGUubG9nIG9ialxuICAgIHN3aXRjaCBvYmouY291bnRyeV9jb2RlXG4gICAgICB3aGVuICdBWicgXG4gICAgICAgIGNvbnNvbGUubG9nICdBWidcbiAgICAgIGVsc2VcbiAgICAgICAgY29uc29sZS5sb2cgJ1JVJ1xuXG5cbiAgc2hvd1J1bGVzOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGh0bWwuYWRkQ2xhc3MgJ3J1bGVzJ1xuICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLnBhZ2UnKS5maW5kKCcucnVsZXMnKS5zaG93KClcbiAgICB3aW5kb3cuc2Nyb2xsVG8gMCwgMFxuXG4gIGNsb3NlUnVsZXM6IChldmVudCk9PlxuICAgIEBodG1sLnJlbW92ZUNsYXNzICdydWxlcydcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZSkuaGlkZSgpXG4gICAgd2luZG93LnNjcm9sbFRvIDAsIDBcbiAgICBcbiAgY29kZVNlbGVjdENoYW5nZTogKGV2ZW50KT0+XG4gICAgZWxlbWVudCA9ICQgZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHZhbHVlID0gZWxlbWVudC52YWwoKVxuICAgIHdyYXBwZXIgPSBlbGVtZW50LmNsb3Nlc3QoJy5jb2RlLXdpZGdldCcpXG4gICAgY3VycmVudCA9IHdyYXBwZXIuZmluZCgnLmN1cnJlbnQgLnZhbHVlJylcbiAgICBjdXJyZW50LnRleHQgdmFsdWVcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiY29kZVwiXVt2YWx1ZT1cIicrdmFsdWUrJ1wiXScpLnRyaWdnZXIgJ2NsaWNrJ1xuXG4gIGNvZGVDaGFuZ2U6IChldmVudCk9PlxuICAgIGVsZW1lbnQgPSAkIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB3cmFwcGVyID0gZWxlbWVudC5jbG9zZXN0KCcuY29kZS13aWRnZXQnKVxuICAgIGN1cnJlbnQgPSB3cmFwcGVyLmZpbmQoJy5jdXJyZW50IC52YWx1ZScpXG4gICAgY3VycmVudC50ZXh0KGVsZW1lbnQudmFsKCkpXG4gICAgd3JhcHBlci5hZGRDbGFzcyAnY2hhbmdlZCdcbiAgICB3aW5kb3cuc2V0VGltZW91dCgoKS0+XG4gICAgICB3cmFwcGVyLnJlbW92ZUNsYXNzICdjaGFuZ2VkJ1xuICAgICwgNTAwKVxuXG5cbiAgdGltZXJVcGRhdGU6ID0+XG4gICAgaWYgKEB0aSUyKT09MFxuICAgICAgc2VwYXRvciA9IFwiOlwiXG4gICAgZWxzZVxuICAgICAgc2VwYXRvciA9IFwiwqBcIlxuICAgIEB0aSsrXG4gICAgQHRpbWVyLnRleHQobW9tZW50KCkuZm9ybWF0KFwiSEhcIitzZXBhdG9yK1wibW1cIikpXG5cbiAgc2VsZWN0TGFuZ3VhZ2U6IChldmVudCk9PlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIEBsYW5nLmZpbmQoJ2EnKS50b2dnbGVDbGFzcyAnc2VsZWN0ZWQnXG4gICAgQGh0bWwuYXR0ciAnbGFuZycsIEBsYW5nLmZpbmQoJy5zZWxlY3RlZCcpLmF0dHIoJ2RhdGEtbGFuZycpXG5cbiAgc3VibWl0OiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZm9ybSA9ICQgZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnNvbGUubG9nKGZvcm0uc2VyaWFsaXplKCkpXG4gICAgJC5wb3N0KGZvcm0uYXR0cignYWN0aW9uJyksIGZvcm0uc2VyaWFsaXplKCkpLmNvbXBsZXRlKEBmb3JtU2VuZClcblxuICBmb3JtU2VuZDogKHJlc3BvbmNlKT0+XG4gICAgQGZvcm0uaGlkZSgpXG4gICAgQG1lc3NhZ2Uuc2hvdygpXG5cbiAgdHJ5c3VibWl0OiAoZXZlbnQpPT5cbiAgICBidXR0b24gPSAkIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoJ2Zvcm0ucmVnaXN0ZXItZm9ybScpXG4gICAgZm9ybS5hZGRDbGFzcygndmFsaWRhdGlvbi1zdGFydCcpXG5cblxuJChkb2N1bWVudCkucmVhZHkgKCktPlxuICBkb2N1bWVudC5sYW5kaW5nID0gbmV3IExhbmRnaW5nQ29udHJvbGxlcigpIl19